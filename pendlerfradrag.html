<!DOCTYPE html>
<html lang="no">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4100900262694764" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pendlerfradrag Kalkulator 2026 - Beregn reisefradrag | Kalkulatornorge.no</title>
    <meta name="description" content="Gratis pendlerfradragskalkulator for 2026. Beregn skattefradrag for reise til jobb med nye satser: 1,90 kr/km og kun 12 000 kr i bunnfradrag.">
    <meta name="keywords" content="pendlerfradrag, reisefradrag, pendlerfradrag 2026, skattefradrag, kilometer fradrag, arbeidsreise, pendler">
    <link rel="canonical" href="https://kalkulatornorge.no/pendlerfradrag.html">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Source+Serif+4:opsz,wght@8..60,400;8..60,600;8..60,700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/design-system.css">
    <link rel="stylesheet" href="css/components.css">
    
    <!-- Chart.js for visualizations -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    
    <!-- jsPDF for PDF downloads -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <meta property="og:title" content="Pendlerfradrag Kalkulator 2026 | Kalkulatornorge.no">
    <meta property="og:description" content="Beregn skattefradrag for reise til jobb. Nye 2026-satser: 1,90 kr/km, kun 12 000 kr bunnfradrag.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://kalkulatornorge.no/pendlerfradrag.html">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [
        {"@type": "Question", "name": "F√•r jeg reisefradrag selv om jeg sykler til jobb?", "acceptedAnswer": {"@type": "Answer", "text": "Ja, reisefradraget gis uavhengig av transportmiddel. Du f√•r fradrag basert p√• avstanden mellom hjem og jobb, uansett om du sykler, g√•r, kj√∏rer bil eller tar kollektivt."}},
        {"@type": "Question", "name": "Hvor mye kan jeg f√• i reisefradrag i 2026?", "acceptedAnswer": {"@type": "Answer", "text": "I 2026 er satsen 1,90 kr per km med et bunnfradrag p√• 12 000 kr. Maksimalt fradrag er 120 000 kr. En person som bor 35 km fra jobb og jobber 230 dager kan f√• ca. 18 590 kr i fradrag."}},
        {"@type": "Question", "name": "F√•r begge ektefeller fradrag hvis de kj√∏rer sammen?", "acceptedAnswer": {"@type": "Answer", "text": "Ja, hvis to personer kj√∏rer sammen til jobb, f√•r begge fullt reisefradrag. Dette gjelder ogs√• for ektefeller og samboere."}}
      ]
    }
    </script>
    <style>
        .calc-page { background: var(--color-background); min-height: 100vh; }
        .calc-container { max-width: 800px; margin: 0 auto; padding: 32px 20px; }
        .back-link { display: inline-flex; align-items: center; gap: 8px; color: var(--color-text-secondary); text-decoration: none; font-size: 0.9rem; font-weight: 500; margin-bottom: 24px; transition: color 0.2s; }
        .back-link:hover { color: var(--color-primary); }
        .calc-header { text-align: center; margin-bottom: 32px; }
        .calc-icon { width: 64px; height: 64px; background: var(--color-primary-light); border-radius: 16px; display: flex; align-items: center; justify-content: center; margin: 0 auto 16px; }
        .calc-icon svg { width: 32px; height: 32px; }
        .calc-header h1 { font-family: var(--font-display); font-size: 2rem; font-weight: 700; color: var(--color-text); margin: 0 0 8px 0; }
        .calc-header p { color: var(--color-text-secondary); font-size: 1rem; margin: 0; }
        .calc-box { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 16px; padding: 32px; margin-bottom: 24px; }
        .form-group { margin-bottom: 20px; }
        .form-label { display: block; font-weight: 600; color: var(--color-text); margin-bottom: 8px; font-size: 0.9rem; }
        .form-input, .form-select { width: 100%; padding: 14px 16px; border: 1px solid var(--color-border); border-radius: 10px; font-size: 1rem; font-family: inherit; transition: border-color 0.2s, box-shadow 0.2s; box-sizing: border-box; background: var(--color-surface); }
        .form-input:focus, .form-select:focus { outline: none; border-color: var(--color-primary); box-shadow: 0 0 0 3px var(--color-primary-light); }
        .form-hint { display: block; font-size: 0.8rem; color: var(--color-text-secondary); margin-top: 6px; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
        @media (max-width: 500px) { .form-row { grid-template-columns: 1fr; } }
        .calc-btn { width: 100%; padding: 16px 24px; background: var(--color-primary); color: white; border: none; border-radius: 10px; font-size: 1rem; font-weight: 600; font-family: inherit; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: background 0.2s, transform 0.1s; }
        .calc-btn:hover { background: var(--color-primary-hover); }
        .calc-btn:active { transform: scale(0.98); }
        
        /* Micro-tool buttons */
        .micro-tools { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px; margin-bottom: 20px; }
        .micro-tool-btn { padding: 12px 16px; background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 10px; font-size: 0.9rem; font-weight: 500; font-family: inherit; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s; }
        .micro-tool-btn:hover { background: var(--color-primary-light); border-color: var(--color-primary); color: var(--color-primary); }
        .micro-tool-btn svg { width: 18px; height: 18px; }
        
        /* Results section */
        .results-section { margin-top: 24px; display: none; }
        .results-grid { display: grid; gap: 20px; margin-bottom: 24px; }
        
        /* Chart container */
        .chart-container { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 12px; padding: 24px; margin-bottom: 20px; }
        .chart-container h3 { font-family: var(--font-display); font-size: 1.1rem; font-weight: 600; color: var(--color-text); margin: 0 0 16px 0; }
        .chart-wrapper { position: relative; height: 300px; }
        
        /* Results table */
        .results-table { width: 100%; border-collapse: collapse; background: var(--color-surface); border-radius: 12px 12px 0 0; overflow: hidden; border: 1px solid var(--color-border); border-bottom: none; }
        .results-table thead { background: var(--color-primary); color: white; }
        .results-table th { padding: 14px 20px; text-align: left; font-weight: 600; font-size: 0.9rem; }
        .results-table th:last-child { text-align: right; }
        .results-table td { padding: 14px 20px; font-size: 0.9rem; border-bottom: 1px solid var(--color-border); }
        .results-table td:first-child { color: var(--color-text-secondary); }
        .results-table td:last-child { text-align: right; font-weight: 600; color: var(--color-text); }
        .results-table tbody tr:hover { background: var(--color-background); }
        .results-table tr.highlight td { background: rgba(196, 83, 58, 0.04); }
        .results-table tr.highlight td:last-child { color: var(--color-primary); }
        .results-total { background: linear-gradient(135deg, #C4533A 0%, #A8452F 100%); border-radius: 0 0 12px 12px; padding: 24px; display: flex; justify-content: space-between; align-items: center; color: white; }
        .total-label { font-size: 0.9rem; opacity: 0.9; margin-bottom: 4px; }
        .total-value { font-family: var(--font-display); font-size: 2rem; font-weight: 700; }
        .total-sub { font-size: 0.85rem; opacity: 0.8; margin-top: 4px; }
        .total-right { text-align: right; }
        .total-right .monthly-label { font-size: 0.8rem; opacity: 0.8; margin-bottom: 4px; }
        .total-right .monthly-value { font-family: var(--font-display); font-size: 1.25rem; font-weight: 600; }
        @media (max-width: 480px) { .results-total { flex-direction: column; text-align: center; gap: 16px; } .total-right { text-align: center; } .total-value { font-size: 1.75rem; } }
        
        /* Action buttons */
        .action-buttons { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 12px; margin-top: 24px; }
        .action-btn { padding: 12px 16px; background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 10px; font-size: 0.9rem; font-weight: 500; font-family: inherit; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s; text-decoration: none; color: var(--color-text); }
        .action-btn:hover { background: var(--color-primary-light); border-color: var(--color-primary); color: var(--color-primary); }
        .action-btn svg { width: 18px; height: 18px; }
        .action-btn.primary { background: var(--color-primary); color: white; border-color: var(--color-primary); }
        .action-btn.primary:hover { background: var(--color-primary-hover); }
        
        /* Social share buttons */
        .social-share { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; margin-top: 16px; }
        .share-btn { padding: 10px 14px; border-radius: 8px; font-size: 0.85rem; font-weight: 500; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 8px; transition: all 0.2s; border: none; text-decoration: none; }
        .share-btn svg { width: 16px; height: 16px; }
        .share-twitter { background: #1DA1F2; color: white; }
        .share-twitter:hover { background: #1a8cd8; }
        .share-facebook { background: #1877F2; color: white; }
        .share-facebook:hover { background: #166fe5; }
        .share-linkedin { background: #0A66C2; color: white; }
        .share-linkedin:hover { background: #095196; }
        .share-copy { background: var(--color-surface); color: var(--color-text); border: 1px solid var(--color-border); }
        .share-copy:hover { background: var(--color-primary-light); border-color: var(--color-primary); color: var(--color-primary); }
        
        /* Interactive features section */
        .interactive-section { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 12px; padding: 24px; margin-top: 20px; }
        .interactive-section h3 { font-family: var(--font-display); font-size: 1.1rem; font-weight: 600; color: var(--color-text); margin: 0 0 16px 0; }
        
        /* Savings scenarios */
        .savings-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; }
        .savings-card { background: linear-gradient(135deg, rgba(196, 83, 58, 0.08) 0%, rgba(196, 83, 58, 0.04) 100%); border: 1px solid rgba(196, 83, 58, 0.2); border-radius: 12px; padding: 20px; text-align: center; }
        .savings-card .scenario-label { font-size: 0.85rem; color: var(--color-text-secondary); margin-bottom: 8px; }
        .savings-card .scenario-value { font-family: var(--font-display); font-size: 1.5rem; font-weight: 700; color: var(--color-primary); margin-bottom: 4px; }
        .savings-card .scenario-desc { font-size: 0.8rem; color: var(--color-text-secondary); }
        
        /* BigMac index */
        .bigmac-display { background: linear-gradient(135deg, #FFF8F0 0%, #FFF3E6 100%); border: 2px solid #FFD699; border-radius: 12px; padding: 24px; text-align: center; margin-top: 20px; }
        .bigmac-display .bigmac-icon { font-size: 3rem; margin-bottom: 12px; }
        .bigmac-display h4 { font-family: var(--font-display); font-size: 1rem; color: var(--color-text-secondary); margin: 0 0 8px 0; }
        .bigmac-display .bigmac-value { font-family: var(--font-display); font-size: 2rem; font-weight: 700; color: #D97557; margin-bottom: 4px; }
        .bigmac-display .bigmac-sub { font-size: 0.9rem; color: var(--color-text-secondary); }
        
        /* Regional comparison */
        .regional-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 12px; }
        .regional-card { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 10px; padding: 16px; }
        .regional-card .region-name { font-weight: 600; color: var(--color-text); margin-bottom: 8px; font-size: 0.9rem; }
        .regional-card .region-value { font-family: var(--font-display); font-size: 1.3rem; font-weight: 700; color: var(--color-primary); margin-bottom: 4px; }
        .regional-card .region-diff { font-size: 0.8rem; color: var(--color-text-secondary); }
        
        /* Modal styles */
        .modal { display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); animation: fadeIn 0.2s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .modal-content { background: var(--color-surface); margin: 5% auto; padding: 0; border-radius: 16px; max-width: 600px; width: 90%; box-shadow: 0 4px 20px rgba(0,0,0,0.15); animation: slideDown 0.3s; }
        @keyframes slideDown { from { transform: translateY(-50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        .modal-header { padding: 24px; border-bottom: 1px solid var(--color-border); display: flex; justify-content: space-between; align-items: center; }
        .modal-header h3 { margin: 0; font-family: var(--font-display); font-size: 1.3rem; color: var(--color-text); }
        .modal-close { background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--color-text-secondary); padding: 0; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; border-radius: 6px; transition: background 0.2s; }
        .modal-close:hover { background: var(--color-background); }
        .modal-body { padding: 24px; max-height: 60vh; overflow-y: auto; }
        .modal-footer { padding: 20px 24px; border-top: 1px solid var(--color-border); display: flex; justify-content: flex-end; gap: 12px; }
        
        /* Email content preview */
        .email-preview { background: var(--color-background); border: 1px solid var(--color-border); border-radius: 8px; padding: 16px; font-family: monospace; font-size: 0.85rem; white-space: pre-wrap; margin-bottom: 16px; max-height: 300px; overflow-y: auto; }
        
        .no-deduction-msg { display: none; background: #FFF3E0; border: 1px solid #FF9800; border-radius: 12px; padding: 24px; text-align: center; margin-top: 24px; }
        .no-deduction-msg svg { width: 48px; height: 48px; color: #FF9800; margin-bottom: 12px; }
        .no-deduction-msg h3 { font-family: var(--font-display); font-size: 1.2rem; color: var(--color-text); margin: 0 0 8px 0; }
        .no-deduction-msg p { color: var(--color-text-secondary); margin: 0; font-size: 0.9rem; }
        .info-box { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 12px; padding: 24px; margin-bottom: 24px; }
        .info-box-header { display: flex; align-items: center; gap: 10px; margin-bottom: 16px; }
        .info-box-header svg { color: var(--color-primary); }
        .info-box-header h3 { font-family: var(--font-display); font-size: 1.1rem; font-weight: 600; color: var(--color-text); margin: 0; }
        .info-box p { color: var(--color-text-secondary); font-size: 0.9rem; line-height: 1.6; margin: 0 0 12px 0; }
        .info-box p:last-child { margin-bottom: 0; }
        .info-box a { color: var(--color-primary); text-decoration: none; }
        .info-box a:hover { text-decoration: underline; }
        .seo-content { margin-top: 48px; }
        .seo-content h2 { font-family: var(--font-display); font-size: 1.5rem; color: var(--color-text); margin: 40px 0 16px 0; display: flex; align-items: center; gap: 10px; }
        .seo-content h2:first-child { margin-top: 0; }
        .seo-content p { color: var(--color-text-secondary); line-height: 1.7; margin-bottom: 16px; }
        .seo-content a { color: var(--color-primary); text-decoration: none; }
        .seo-content a:hover { text-decoration: underline; }
        .callout { border-radius: 12px; padding: 20px 24px; margin: 24px 0; display: flex; gap: 16px; }
        .callout-icon { flex-shrink: 0; width: 24px; height: 24px; }
        .callout-content { flex: 1; }
        .callout-title { font-weight: 700; margin-bottom: 4px; color: var(--color-text); }
        .callout-text { margin: 0; font-size: 0.9rem; }
        .callout.tip { background: #E8F5E9; border-left: 4px solid #4CAF50; }
        .callout.tip .callout-icon { color: #4CAF50; }
        .callout.warning { background: #FFF3E0; border-left: 4px solid #FF9800; }
        .callout.warning .callout-icon { color: #FF9800; }
        .callout.info { background: rgba(196, 83, 58, 0.08); border-left: 4px solid var(--color-primary); }
        .callout.info .callout-icon { color: var(--color-primary); }
        .info-table { width: 100%; border-collapse: collapse; margin: 24px 0; background: var(--color-surface); border-radius: 12px; overflow: hidden; border: 1px solid var(--color-border); }
        .info-table th { background: var(--color-primary); color: white; padding: 14px 16px; text-align: left; font-weight: 600; font-size: 0.9rem; }
        .info-table td { padding: 14px 16px; border-bottom: 1px solid var(--color-border); font-size: 0.9rem; }
        .info-table tr:last-child td { border-bottom: none; }
        .info-table .rate-badge { display: inline-block; background: var(--color-primary-light); color: var(--color-primary); padding: 4px 10px; border-radius: 20px; font-weight: 700; font-size: 0.85rem; }
        .info-table .change-positive { color: #4CAF50; font-weight: 600; }
        .info-table .change-negative { color: #4CAF50; font-weight: 600; }
        .info-table tr:hover td { background: var(--color-background); }
        .collapsible { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 12px; margin: 16px 0; overflow: hidden; }
        .collapsible-header { width: 100%; padding: 18px 24px; background: none; border: none; display: flex; justify-content: space-between; align-items: center; cursor: pointer; font-family: inherit; text-align: left; }
        .collapsible-header:hover { background: var(--color-background); }
        .collapsible-title { font-weight: 600; font-size: 1rem; color: var(--color-text); }
        .collapsible-icon { width: 20px; height: 20px; transition: transform 0.2s; }
        .collapsible.open .collapsible-icon { transform: rotate(180deg); }
        .collapsible-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }
        .collapsible.open .collapsible-content { max-height: 2000px; }
        .collapsible-inner { padding: 0 24px 24px 24px; }
        .related-calculators { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px; margin-top: 32px; }
        .related-card { background: var(--color-surface); border: 1px solid var(--color-border); border-radius: 12px; padding: 20px; text-decoration: none; transition: all 0.2s; }
        .related-card:hover { border-color: var(--color-primary); box-shadow: 0 2px 8px rgba(196, 83, 58, 0.1); }
        .related-card-icon { width: 40px; height: 40px; background: var(--color-primary-light); border-radius: 10px; display: flex; align-items: center; justify-content: center; margin-bottom: 12px; }
        .related-card-icon svg { width: 20px; height: 20px; color: var(--color-primary); }
        .related-card h4 { font-family: var(--font-display); font-size: 0.95rem; font-weight: 600; color: var(--color-text); margin: 0 0 6px 0; }
        .related-card p { font-size: 0.8rem; color: var(--color-text-secondary); margin: 0; line-height: 1.5; }
    </style>
</head>
<body class="calc-page">
    <div class="calc-container">
        <a href="index.html" class="back-link">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
            Tilbake til alle kalkulatorer
        </a>

        <div class="calc-header">
            <div class="calc-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 17h14l-3.5-5 2.5-3.5L5 17zM9 5v7M15 8v4"/>
                </svg>
            </div>
            <h1>Pendlerfradrag Kalkulator 2026</h1>
            <p>Beregn skattefradrag for reise mellom hjem og arbeid</p>
        </div>

        <!-- 2026 Rates Info Table -->
        <table class="info-table">
            <thead>
                <tr>
                    <th>Parameter</th>
                    <th>2025</th>
                    <th>2026</th>
                    <th>Endring</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Kilometersats</td>
                    <td>1,83 kr</td>
                    <td><span class="rate-badge">1,90 kr</span></td>
                    <td class="change-positive">+0,07 kr</td>
                </tr>
                <tr>
                    <td>Bunnfradrag (egenandel)</td>
                    <td>15 250 kr</td>
                    <td><span class="rate-badge">12 000 kr</span></td>
                    <td class="change-positive">-3 250 kr</td>
                </tr>
                <tr>
                    <td>Maksimalt fradrag</td>
                    <td>100 880 kr</td>
                    <td><span class="rate-badge">120 000 kr</span></td>
                    <td class="change-positive">+19 120 kr</td>
                </tr>
                <tr>
                    <td>Minsteavstand</td>
                    <td>2,5 km</td>
                    <td>2,5 km</td>
                    <td>Uendret</td>
                </tr>
                <tr>
                    <td>Standard arbeidsdager</td>
                    <td>230</td>
                    <td>230</td>
                    <td>Uendret</td>
                </tr>
            </tbody>
        </table>

        <div class="callout info">
            <div class="callout-icon">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
            </div>
            <div class="callout-content">
                <div class="callout-title">Hvem kan f√• reisefradrag?</div>
                <p class="callout-text">Du kan f√• reisefradrag uansett hvordan du kommer deg til jobb ‚Äì bil, kollektiv, sykkel eller til fots. Det eneste kravet er at reisekostnadene overstiger bunnfradraget p√• 12 000 kr.</p>
            </div>
        </div>

        <!-- Main Calculator -->
        <div class="calc-box">
            <h2 style="font-family: var(--font-display); font-size: 1.3rem; margin: 0 0 24px 0;">Beregn ditt reisefradrag</h2>
            
            <!-- Micro-tools -->
            <div class="micro-tools">
                <button class="micro-tool-btn" onclick="openDistanceFinder()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                    Finn avstand
                </button>
                <button class="micro-tool-btn" onclick="openWorkDaysCounter()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                        <line x1="16" y1="2" x2="16" y2="6"/>
                        <line x1="8" y1="2" x2="8" y2="6"/>
                        <line x1="3" y1="10" x2="21" y2="10"/>
                    </svg>
                    Tell arbeidsdager
                </button>
                <button class="micro-tool-btn" onclick="openBomFergeCalculator()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 6v6l4 2"/>
                    </svg>
                    Bom/Ferge kalkulator
                </button>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="distance">Avstand til jobb (en vei)</label>
                <input type="number" id="distance" class="form-input" placeholder="f.eks. 35" step="0.1" min="0">
                <span class="form-hint">Kilometer fra bolig til arbeidssted (korteste vei)</span>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label class="form-label" for="workdays">Antall arbeidsdager</label>
                    <input type="number" id="workdays" class="form-input" value="230" min="1" max="365">
                    <span class="form-hint">Standard: 230 dager (52 uker - ferie/helligdager)</span>
                </div>

                <div class="form-group">
                    <label class="form-label" for="extraCosts">Bom/ferge/parkering (valgfritt)</label>
                    <input type="number" id="extraCosts" class="form-input" placeholder="0" step="100" min="0">
                    <span class="form-hint">√Örlige ekstra reisekostnader i kr</span>
                </div>
            </div>

            <button class="calc-btn" onclick="calculate()">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="3" y="3" width="18" height="18" rx="2"/>
                    <path d="M9 3v18M16 8h-6M16 12h-6M16 16h-6"/>
                </svg>
                Beregn reisefradrag
            </button>
        </div>

        <!-- No Deduction Message -->
        <div id="noDeduction" class="no-deduction-msg">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="15" y1="9" x2="9" y2="15"/>
                <line x1="9" y1="9" x2="15" y2="15"/>
            </svg>
            <h3>Ingen fradrag</h3>
            <p>Dine reisekostnader er lavere enn bunnfradraget p√• 12 000 kr. Du f√•r derfor ikke reisefradrag.</p>
        </div>

        <!-- Results Section -->
        <div id="results" class="results-section">
            <!-- Chart Visualization -->
            <div class="chart-container">
                <h3>üìä Oversikt reisekostnader</h3>
                <div class="chart-wrapper">
                    <canvas id="costChart"></canvas>
                </div>
            </div>

            <!-- Results Table -->
            <table class="results-table">
                <thead>
                    <tr>
                        <th>Beregning</th>
                        <th>Bel√∏p</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Daglig reiseavstand (tur-retur)</td>
                        <td id="resultDailyKm">-</td>
                    </tr>
                    <tr>
                        <td>√Örlig reiseavstand</td>
                        <td id="resultYearlyKm">-</td>
                    </tr>
                    <tr>
                        <td>Reisekostnad (1,90 kr/km)</td>
                        <td id="resultTravelCost">-</td>
                    </tr>
                    <tr id="rowExtraCosts" style="display: none;">
                        <td>Bom/ferge/parkering</td>
                        <td id="resultExtraCosts">-</td>
                    </tr>
                    <tr>
                        <td>Total reisekostnad</td>
                        <td id="resultTotalCost">-</td>
                    </tr>
                    <tr>
                        <td>Minus bunnfradrag</td>
                        <td>- 12 000 kr</td>
                    </tr>
                    <tr class="highlight">
                        <td><strong>Reisefradrag</strong></td>
                        <td id="resultDeduction"><strong>-</strong></td>
                    </tr>
                </tbody>
            </table>

            <!-- Total Savings -->
            <div class="results-total">
                <div class="total-left">
                    <div class="total-label">√Örlig skattebesparelse (22%)</div>
                    <div class="total-value" id="resultSavings">-</div>
                    <div class="total-sub">Dette er bel√∏pet du sparer i skatt</div>
                </div>
                <div class="total-right">
                    <div class="monthly-label">Per m√•ned</div>
                    <div class="monthly-value" id="resultMonthlySavings">-</div>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <button class="action-btn primary" onclick="downloadPDF()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Last ned PDF
                </button>
                <button class="action-btn" onclick="openEmailModal()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/>
                        <polyline points="22,6 12,13 2,6"/>
                    </svg>
                    Send p√• e-post
                </button>
                <button class="action-btn" onclick="shareResults()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="18" cy="5" r="3"/>
                        <circle cx="6" cy="12" r="3"/>
                        <circle cx="18" cy="19" r="3"/>
                        <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/>
                        <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/>
                    </svg>
                    Del resultat
                </button>
            </div>

            <!-- Social Share Buttons -->
            <div class="social-share">
                <button class="share-btn share-twitter" onclick="shareOnTwitter()">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M23 3a10.9 10.9 0 01-3.14 1.53 4.48 4.48 0 00-7.86 3v1A10.66 10.66 0 013 4s-4 9 5 13a11.64 11.64 0 01-7 2c9 5 20 0 20-11.5a4.5 4.5 0 00-.08-.83A7.72 7.72 0 0023 3z"/>
                    </svg>
                    Twitter
                </button>
                <button class="share-btn share-facebook" onclick="shareOnFacebook()">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18 2h-3a5 5 0 00-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 011-1h3z"/>
                    </svg>
                    Facebook
                </button>
                <button class="share-btn share-linkedin" onclick="shareOnLinkedIn()">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6zM2 9h4v12H2z"/>
                        <circle cx="4" cy="4" r="2"/>
                    </svg>
                    LinkedIn
                </button>
                <button class="share-btn share-copy" onclick="copyToClipboard()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                    </svg>
                    Kopier lenke
                </button>
            </div>

            <!-- Interactive Features -->
            <div class="interactive-section">
                <h3>üí° Hva hvis du optimaliserer?</h3>
                <div class="savings-grid" id="savingsScenarios">
                    <!-- Dynamically populated -->
                </div>
            </div>

            <!-- BigMac Index -->
            <div class="bigmac-display" id="bigmacDisplay">
                <!-- Dynamically populated -->
            </div>

            <!-- Regional Comparison -->
            <div class="interactive-section">
                <h3>üó∫Ô∏è Tilsvarende kj√∏pekraft i andre deler av Norge</h3>
                <p style="font-size: 0.9rem; color: var(--color-text-secondary); margin-bottom: 16px;">
                    Din skattebesparelse tilsvarer disse bel√∏pene i andre regioner (justert for levekostnader):
                </p>
                <div class="regional-grid" id="regionalComparison">
                    <!-- Dynamically populated -->
                </div>
            </div>
        </div>

        <!-- Calculation Example Callout -->
        <div class="callout info">
            <div class="callout-icon">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"/></svg>
            </div>
            <div class="callout-content">
                <div class="callout-title">Beregningseksempel</div>
                <p class="callout-text"><strong>Du bor 35 km fra jobb og jobber 230 dager i √•ret:</strong><br>
                ‚Ä¢ √Örlig reiseavstand: 35 km √ó 2 √ó 230 = 16 100 km<br>
                ‚Ä¢ Reisekostnad: 16 100 √ó 1,90 kr = 30 590 kr<br>
                ‚Ä¢ Minus bunnfradrag: 30 590 - 12 000 = <strong>18 590 kr i fradrag</strong><br>
                ‚Ä¢ Skattebesparelse (22%): ca. <strong>4 090 kr</strong></p>
            </div>
        </div>

        <div class="callout warning">
            <div class="callout-icon">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></svg>
            </div>
            <div class="callout-content">
                <div class="callout-title">Husk hjemmekontor!</div>
                <p class="callout-text">Dager du jobber hjemmefra skal trekkes fra. Er du borte mer enn 15 dager i √•ret (ferie, sykdom, hjemmekontor), m√• du beregne etter faktiske arbeidsdager, ikke 230-standarden.</p>
            </div>
        </div>

        <!-- Collapsibles -->
        <div class="collapsible" onclick="toggleCollapsible(this)">
            <button class="collapsible-header">
                <span class="collapsible-title">Slik beregnes fradraget</span>
                <svg class="collapsible-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </button>
            <div class="collapsible-content">
                <div class="collapsible-inner">
                    <ol style="padding-left: 20px; color: var(--color-text-secondary); line-height: 1.7;">
                        <li><strong>Tell reiseavstand:</strong> Korteste vei fra bolig til arbeidssted</li>
                        <li><strong>Beregn √•rlig distanse:</strong> Avstand √ó 2 √ó antall arbeidsdager</li>
                        <li><strong>Multipliser med sats:</strong> Total km √ó 1,90 kr</li>
                        <li><strong>Trekk fra bunnfradrag:</strong> Resultat minus 12 000 kr</li>
                        <li><strong>Skatteeffekt:</strong> Fradraget √ó 22% = din besparelse</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="collapsible" onclick="toggleCollapsible(this)">
            <button class="collapsible-header">
                <span class="collapsible-title">Bom, ferge og parkering</span>
                <svg class="collapsible-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"/>
                </svg>
            </button>
            <div class="collapsible-content">
                <div class="collapsible-inner">
                    <p style="color: var(--color-text-secondary); line-height: 1.7;">
                        ‚Ä¢ Bom og ferge kan legges til hvis du sparer minst 2 timer daglig vs. kollektiv<br>
                        ‚Ä¢ M√• ha over 3 300 kr i √•rlige bom-/fergekostnader<br>
                        ‚Ä¢ Bruk billigste betalingsm√•te (AutoPASS, fergeabonnement)<br>
                        ‚Ä¢ Parkeringsutgifter ved arbeidssted er <strong>IKKE</strong> fradragsberettiget
                    </p>
                </div>
            </div>
        </div>

        <!-- FAQ Section -->
        <div class="seo-content">
            <h2>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                    <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                Ofte stilte sp√∏rsm√•l
            </h2>

            <div class="collapsible" onclick="toggleCollapsible(this)">
                <button class="collapsible-header">
                    <span class="collapsible-title">F√•r jeg fradrag selv om jeg sykler til jobb?</span>
                    <svg class="collapsible-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"/>
                    </svg>
                </button>
                <div class="collapsible-content">
                    <div class="collapsible-inner">
                        <p>Ja! Reisefradraget gis uavhengig av transportmiddel. Selv om du sykler eller g√•r, f√•r du fradrag basert p√• avstanden. Du trenger ikke dokumentere faktiske utgifter.</p>
                    </div>
                </div>
            </div>

            <div class="collapsible" onclick="toggleCollapsible(this)">
                <button class="collapsible-header">
                    <span class="collapsible-title">Hva hvis jeg har to jobber?</span>
                    <svg class="collapsible-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"/>
                    </svg>
                </button>
                <div class="collapsible-content">
                    <div class="collapsible-inner">
                        <p>Du f√•r fradrag for begge arbeidsreisene. Beregn reisekostnad for hver jobb separat, og legg dem sammen f√∏r du trekker fra bunnfradraget p√• 12 000 kr.</p>
                    </div>
                </div>
            </div>

            <div class="collapsible" onclick="toggleCollapsible(this)">
                <button class="collapsible-header">
                    <span class="collapsible-title">F√•r begge fradrag hvis vi kj√∏rer sammen?</span>
                    <svg class="collapsible-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"/>
                    </svg>
                </button>
                <div class="collapsible-content">
                    <div class="collapsible-inner">
                        <p>Ja! Hvis to personer kj√∏rer sammen til jobb, f√•r begge fullt reisefradrag. Dette gjelder ogs√• ektefeller.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="callout tip">
            <div class="callout-icon">
                <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/></svg>
            </div>
            <div class="callout-content">
                <div class="callout-title">Nytt i 2026</div>
                <p class="callout-text">Med lavere bunnfradrag trenger du bare ca. 27 km daglig reiseavstand (tur/retur) for √• f√• fradrag. I 2025 var grensen 36 km.</p>
            </div>
        </div>

        <!-- Related Calculators -->
        <h2 style="font-family: var(--font-display); font-size: 1.5rem; color: var(--color-text); margin: 48px 0 24px 0;">Relaterte kalkulatorer</h2>
        <div class="related-calculators">
            <a href="skatt.html" class="related-card">
                <div class="related-card-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2"/>
                        <path d="M9 3v18M16 8h-6M16 12h-6M16 16h-6"/>
                    </svg>
                </div>
                <h4>Skattekalkulator</h4>
                <p>Beregn total skatt for 2026</p>
            </a>

            <a href="brutto-netto.html" class="related-card">
                <div class="related-card-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23"/>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                    </svg>
                </div>
                <h4>Brutto/Netto</h4>
                <p>Konverter mellom brutto- og nettol√∏nn</p>
            </a>

            <a href="bilkostnad.html" class="related-card">
                <div class="related-card-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M5 17h14l-3.5-5 2.5-3.5L5 17z"/>
                        <path d="M9 5v7M15 8v4"/>
                    </svg>
                </div>
                <h4>Bilkostnad</h4>
                <p>Beregn totale bilutgifter</p>
            </a>

            <a href="arbeidsgiveravgift.html" class="related-card">
                <div class="related-card-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                        <line x1="16" y1="2" x2="16" y2="6"/>
                        <line x1="8" y1="2" x2="8" y2="6"/>
                        <line x1="3" y1="10" x2="21" y2="10"/>
                    </svg>
                </div>
                <h4>Arbeidsgiveravgift</h4>
                <p>Beregn AGA per sone</p>
            </a>
        </div>
    </div>

    <!-- Email Modal -->
    <div id="emailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìß Send resultat p√• e-post</h3>
                <button class="modal-close" onclick="closeEmailModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--color-text-secondary); margin-bottom: 16px;">
                    Kopier teksten nedenfor og lim inn i din e-postklient:
                </p>
                <div class="email-preview" id="emailContent"></div>
                <button class="action-btn primary" onclick="copyEmailContent()" style="width: 100%;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                    </svg>
                    Kopier til utklippstavle
                </button>
            </div>
        </div>
    </div>

    <!-- Distance Finder Modal -->
    <div id="distanceModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìç Finn avstand mellom adresser</h3>
                <button class="modal-close" onclick="closeDistanceFinder()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Fra adresse (hjem)</label>
                    <input type="text" id="fromAddress" class="form-input" placeholder="f.eks. Karl Johans gate 1, Oslo">
                </div>
                <div class="form-group">
                    <label class="form-label">Til adresse (jobb)</label>
                    <input type="text" id="toAddress" class="form-input" placeholder="f.eks. Dronning Eufemias gate 6, Oslo">
                </div>
                <button class="action-btn primary" onclick="calculateDistance()" style="width: 100%;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                    Beregn avstand
                </button>
                <div id="distanceResult" style="margin-top: 16px; display: none;">
                    <div style="background: var(--color-primary-light); border-radius: 8px; padding: 16px; text-align: center;">
                        <div style="font-size: 0.9rem; color: var(--color-text-secondary); margin-bottom: 8px;">Beregnet avstand (en vei)</div>
                        <div id="distanceValue" style="font-size: 2rem; font-weight: 700; color: var(--color-primary);"></div>
                        <button class="action-btn" onclick="useCalculatedDistance()" style="margin-top: 12px; width: 100%;">Bruk denne avstanden</button>
                    </div>
                </div>
                <p style="font-size: 0.85rem; color: var(--color-text-secondary); margin-top: 12px;">
                    ‚ÑπÔ∏è Dette er et estimat basert p√• adresser. For n√∏yaktig avstand, sjekk faktisk kj√∏rerute.
                </p>
            </div>
        </div>
    </div>

    <!-- Work Days Counter Modal -->
    <div id="workDaysModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìÖ Tell arbeidsdager</h3>
                <button class="modal-close" onclick="closeWorkDaysCounter()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--color-text-secondary); margin-bottom: 16px;">
                    Beregn faktiske arbeidsdager ved √• trekke fra frav√¶r:
                </p>
                <div class="form-group">
                    <label class="form-label">Standard arbeidsdager per √•r</label>
                    <input type="number" id="standardWorkDays" class="form-input" value="230" readonly>
                    <span class="form-hint">52 uker √ó 5 dager - ferie/helligdager</span>
                </div>
                <div class="form-group">
                    <label class="form-label">Hjemmekontor-dager</label>
                    <input type="number" id="homeDays" class="form-input" value="0" min="0" max="230">
                </div>
                <div class="form-group">
                    <label class="form-label">Sykedager</label>
                    <input type="number" id="sickDays" class="form-input" value="0" min="0" max="230">
                </div>
                <div class="form-group">
                    <label class="form-label">Andre frav√¶rsdager</label>
                    <input type="number" id="otherDays" class="form-input" value="0" min="0" max="230">
                </div>
                <div style="background: var(--color-primary-light); border-radius: 8px; padding: 16px; text-align: center; margin-top: 16px;">
                    <div style="font-size: 0.9rem; color: var(--color-text-secondary); margin-bottom: 8px;">Faktiske arbeidsdager</div>
                    <div id="actualWorkDays" style="font-size: 2rem; font-weight: 700; color: var(--color-primary);">230</div>
                </div>
                <button class="action-btn primary" onclick="useCalculatedWorkDays()" style="margin-top: 16px; width: 100%;">
                    Bruk dette antallet
                </button>
            </div>
        </div>
    </div>

    <!-- Bom/Ferge Calculator Modal -->
    <div id="bomFergeModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üí∞ Bom/Ferge kalkulator</h3>
                <button class="modal-close" onclick="closeBomFergeCalculator()">&times;</button>
            </div>
            <div class="modal-body">
                <p style="color: var(--color-text-secondary); margin-bottom: 16px;">
                    Beregn √•rlige kostnader for bom og ferge:
                </p>
                <div class="form-group">
                    <label class="form-label">Bompenger per dag (tur-retur)</label>
                    <input type="number" id="bomDaily" class="form-input" placeholder="f.eks. 30" step="1" min="0">
                    <span class="form-hint">Total kostnad for b√•de tur og retur</span>
                </div>
                <div class="form-group">
                    <label class="form-label">Ferge per dag (tur-retur)</label>
                    <input type="number" id="fergeDaily" class="form-input" placeholder="f.eks. 50" step="1" min="0">
                    <span class="form-hint">Total kostnad for b√•de tur og retur</span>
                </div>
                <div class="form-group">
                    <label class="form-label">Antall arbeidsdager</label>
                    <input type="number" id="bomWorkDays" class="form-input" value="230" min="1" max="365">
                </div>
                <div style="background: var(--color-primary-light); border-radius: 8px; padding: 16px; margin-top: 16px;">
                    <div style="display: grid; gap: 12px;">
                        <div>
                            <div style="font-size: 0.85rem; color: var(--color-text-secondary);">√Örlig bomkostnad</div>
                            <div id="yearlyBom" style="font-size: 1.3rem; font-weight: 700; color: var(--color-primary);">0 kr</div>
                        </div>
                        <div>
                            <div style="font-size: 0.85rem; color: var(--color-text-secondary);">√Örlig fergekostnad</div>
                            <div id="yearlyFerge" style="font-size: 1.3rem; font-weight: 700; color: var(--color-primary);">0 kr</div>
                        </div>
                        <div style="border-top: 1px solid rgba(196, 83, 58, 0.3); padding-top: 12px;">
                            <div style="font-size: 0.85rem; color: var(--color-text-secondary);">Totalt per √•r</div>
                            <div id="yearlyTotal" style="font-size: 1.8rem; font-weight: 700; color: var(--color-primary);">0 kr</div>
                        </div>
                    </div>
                </div>
                <button class="action-btn primary" onclick="useCalculatedBomFerge()" style="margin-top: 16px; width: 100%;">
                    Bruk dette bel√∏pet
                </button>
                <div class="callout info" style="margin-top: 16px;">
                    <div class="callout-icon">
                        <svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"/></svg>
                    </div>
                    <div class="callout-content">
                        <p class="callout-text" style="margin: 0; font-size: 0.85rem;">
                            <strong>Krav for fradrag:</strong> Du m√• spare minst 2 timer daglig ved √• kj√∏re vs. kollektivt, og totale bom/ferge-kostnader m√• overstige 3 300 kr √•rlig.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Constants (2026 rates)
        const RATE_PER_KM = 1.90;
        const THRESHOLD = 12000;
        const MAX_DEDUCTION = 120000;
        const TAX_RATE = 0.22;
        
        // BigMac and regional data
        const BIGMAC_PRICE = 125; // NOK per Big Mac Menu in Oslo
        const REGIONAL_MULTIPLIERS = {
            'Oslo': 1.00,
            'Bergen': 0.75,
            'Stavanger': 0.74,
            'Trondheim': 0.78,
            'Sm√•byer': 0.70
        };

        // Global variables for results
        let currentResults = null;
        let costChart = null;
        let calculatedDistance = 0;

        function formatNumber(num) {
            return Math.round(num).toLocaleString('nb-NO');
        }

        function calculate() {
            const distance = parseFloat(document.getElementById('distance').value) || 0;
            const workdays = parseInt(document.getElementById('workdays').value) || 230;
            const extraCosts = parseFloat(document.getElementById('extraCosts').value) || 0;
            
            if (distance <= 0) {
                alert('Vennligst oppgi avstand til jobb');
                return;
            }
            
            // Calculations
            const dailyKm = distance * 2;
            const yearlyKm = dailyKm * workdays;
            const travelCost = yearlyKm * RATE_PER_KM;
            const totalCost = travelCost + extraCosts;
            
            // Deduction with threshold and max
            let deduction = Math.max(0, totalCost - THRESHOLD);
            deduction = Math.min(deduction, MAX_DEDUCTION);
            
            // Tax savings
            const taxSavings = deduction * TAX_RATE;
            const monthlySavings = taxSavings / 12;
            
            // Store results
            currentResults = {
                distance,
                workdays,
                extraCosts,
                dailyKm,
                yearlyKm,
                travelCost,
                totalCost,
                deduction,
                taxSavings,
                monthlySavings
            };
            
            // Update results
            document.getElementById('resultDailyKm').textContent = formatNumber(dailyKm) + ' km';
            document.getElementById('resultYearlyKm').textContent = formatNumber(yearlyKm) + ' km';
            document.getElementById('resultTravelCost').textContent = formatNumber(travelCost) + ' kr';
            document.getElementById('resultTotalCost').textContent = formatNumber(totalCost) + ' kr';
            document.getElementById('resultDeduction').textContent = formatNumber(deduction) + ' kr';
            document.getElementById('resultSavings').textContent = formatNumber(taxSavings) + ' kr/√•r';
            document.getElementById('resultMonthlySavings').textContent = formatNumber(monthlySavings) + ' kr';
            
            // Show/hide extra costs row
            const extraCostsRow = document.getElementById('rowExtraCosts');
            if (extraCosts > 0) {
                extraCostsRow.style.display = '';
                document.getElementById('resultExtraCosts').textContent = formatNumber(extraCosts) + ' kr';
            } else {
                extraCostsRow.style.display = 'none';
            }
            
            // Show results or no-deduction message
            const resultsSection = document.getElementById('results');
            const noDeductionMsg = document.getElementById('noDeduction');
            
            if (deduction > 0) {
                resultsSection.style.display = 'block';
                noDeductionMsg.style.display = 'none';
                
                // Create chart
                createCostChart();
                
                // Generate interactive features
                generateSavingsScenarios();
                generateBigMacDisplay();
                generateRegionalComparison();
            } else {
                resultsSection.style.display = 'none';
                noDeductionMsg.style.display = 'block';
            }
            
            // Scroll to results
            setTimeout(() => {
                const target = deduction > 0 ? resultsSection : noDeductionMsg;
                target.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 100);
        }

        function createCostChart() {
            const ctx = document.getElementById('costChart');
            
            if (costChart) {
                costChart.destroy();
            }
            
            const data = {
                labels: ['Reisekostnad', 'Ekstra kostnader', 'Bunnfradrag (ikke fradragsberettiget)'],
                datasets: [{
                    data: [
                        currentResults.travelCost,
                        currentResults.extraCosts,
                        THRESHOLD
                    ],
                    backgroundColor: [
                        'rgba(196, 83, 58, 0.8)',
                        'rgba(217, 117, 87, 0.8)',
                        'rgba(200, 200, 200, 0.5)'
                    ],
                    borderColor: [
                        '#C4533A',
                        '#D97557',
                        '#888888'
                    ],
                    borderWidth: 2
                }]
            };
            
            costChart = new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 15,
                                font: { size: 12 },
                                generateLabels: function(chart) {
                                    const data = chart.data;
                                    return data.labels.map((label, i) => ({
                                        text: `${label}: ${formatNumber(data.datasets[0].data[i])} kr`,
                                        fillStyle: data.datasets[0].backgroundColor[i],
                                        hidden: false,
                                        index: i
                                    }));
                                }
                            }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.label + ': ' + formatNumber(context.parsed) + ' kr';
                                }
                            }
                        }
                    }
                }
            });
        }

        function generateSavingsScenarios() {
            const scenarios = [
                { label: 'Med 10% kortere vei', multiplier: 0.90 },
                { label: 'Med 15% kortere vei', multiplier: 0.85 },
                { label: 'Med 20% kortere vei', multiplier: 0.80 }
            ];
            
            const html = scenarios.map(scenario => {
                const newDistance = currentResults.distance * scenario.multiplier;
                const newYearlyKm = newDistance * 2 * currentResults.workdays;
                const newTravelCost = newYearlyKm * RATE_PER_KM;
                const newTotalCost = newTravelCost + currentResults.extraCosts;
                const newDeduction = Math.max(0, Math.min(newTotalCost - THRESHOLD, MAX_DEDUCTION));
                const newSavings = newDeduction * TAX_RATE;
                
                return `
                    <div class="savings-card">
                        <div class="scenario-label">${scenario.label}</div>
                        <div class="scenario-value">${formatNumber(newSavings)} kr</div>
                        <div class="scenario-desc">√Örlig skattebesparelse</div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('savingsScenarios').innerHTML = html;
        }

        function generateBigMacDisplay() {
            const yearlyBigMacs = Math.floor(currentResults.taxSavings / BIGMAC_PRICE);
            const monthlyBigMacs = Math.floor(currentResults.monthlySavings / BIGMAC_PRICE);
            
            const html = `
                <div class="bigmac-icon">üçî</div>
                <h4>Skattebesparelsen tilsvarer</h4>
                <div class="bigmac-value">${formatNumber(yearlyBigMacs)} Big Mac-menyer</div>
                <div class="bigmac-sub">per √•r (ca. ${monthlyBigMacs} per m√•ned)</div>
            `;
            
            document.getElementById('bigmacDisplay').innerHTML = html;
        }

        function generateRegionalComparison() {
            const html = Object.entries(REGIONAL_MULTIPLIERS).map(([region, multiplier]) => {
                const equivalentSavings = currentResults.taxSavings / multiplier;
                const difference = ((equivalentSavings / currentResults.taxSavings - 1) * 100).toFixed(0);
                
                return `
                    <div class="regional-card">
                        <div class="region-name">${region}</div>
                        <div class="region-value">${formatNumber(equivalentSavings)} kr</div>
                        <div class="region-diff">${multiplier === 1 ? 'Basis' : (difference > 0 ? '+' : '') + difference + '%'}</div>
                    </div>
                `;
            }).join('');
            
            document.getElementById('regionalComparison').innerHTML = html;
        }

        // PDF Download
        function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Title
            doc.setFontSize(20);
            doc.setTextColor(196, 83, 58);
            doc.text('Pendlerfradrag Beregning 2026', 20, 20);
            
            // Date
            doc.setFontSize(10);
            doc.setTextColor(100);
            doc.text(`Generert: ${new Date().toLocaleDateString('nb-NO')}`, 20, 28);
            
            // Input data
            doc.setFontSize(14);
            doc.setTextColor(0);
            doc.text('Inndata:', 20, 40);
            
            doc.setFontSize(11);
            doc.text(`Avstand til jobb: ${currentResults.distance} km`, 25, 48);
            doc.text(`Arbeidsdager: ${currentResults.workdays}`, 25, 55);
            if (currentResults.extraCosts > 0) {
                doc.text(`Bom/ferge/parkering: ${formatNumber(currentResults.extraCosts)} kr`, 25, 62);
            }
            
            // Results
            let yPos = currentResults.extraCosts > 0 ? 75 : 68;
            doc.setFontSize(14);
            doc.text('Beregning:', 20, yPos);
            
            yPos += 8;
            doc.setFontSize(11);
            doc.text(`Daglig reiseavstand (tur-retur): ${formatNumber(currentResults.dailyKm)} km`, 25, yPos);
            yPos += 7;
            doc.text(`√Örlig reiseavstand: ${formatNumber(currentResults.yearlyKm)} km`, 25, yPos);
            yPos += 7;
            doc.text(`Reisekostnad (1,90 kr/km): ${formatNumber(currentResults.travelCost)} kr`, 25, yPos);
            
            if (currentResults.extraCosts > 0) {
                yPos += 7;
                doc.text(`Bom/ferge/parkering: ${formatNumber(currentResults.extraCosts)} kr`, 25, yPos);
            }
            
            yPos += 7;
            doc.text(`Total reisekostnad: ${formatNumber(currentResults.totalCost)} kr`, 25, yPos);
            yPos += 7;
            doc.text(`Minus bunnfradrag: -12 000 kr`, 25, yPos);
            
            // Highlight deduction
            yPos += 12;
            doc.setFontSize(14);
            doc.setTextColor(196, 83, 58);
            doc.text(`Reisefradrag: ${formatNumber(currentResults.deduction)} kr`, 25, yPos);
            
            // Tax savings
            yPos += 10;
            doc.setFontSize(12);
            doc.setTextColor(0);
            doc.text(`Skattebesparelse (22%): ${formatNumber(currentResults.taxSavings)} kr/√•r`, 25, yPos);
            yPos += 7;
            doc.text(`Per m√•ned: ${formatNumber(currentResults.monthlySavings)} kr`, 25, yPos);
            
            // Footer
            doc.setFontSize(9);
            doc.setTextColor(150);
            doc.text('Kalkulatornorge.no - Gratis norske kalkulatorer', 20, 280);
            doc.text('Dette er et estimat. Kontakt Skatteetaten for offisiell beregning.', 20, 285);
            
            doc.save('pendlerfradrag-beregning.pdf');
        }

        // Email Modal
        function openEmailModal() {
            const emailContent = `
PENDLERFRADRAG BEREGNING 2026
Generert: ${new Date().toLocaleDateString('nb-NO')}

INNDATA:
Avstand til jobb: ${currentResults.distance} km
Arbeidsdager: ${currentResults.workdays}
${currentResults.extraCosts > 0 ? `Bom/ferge/parkering: ${formatNumber(currentResults.extraCosts)} kr` : ''}

BEREGNING:
Daglig reiseavstand (tur-retur): ${formatNumber(currentResults.dailyKm)} km
√Örlig reiseavstand: ${formatNumber(currentResults.yearlyKm)} km
Reisekostnad (1,90 kr/km): ${formatNumber(currentResults.travelCost)} kr
${currentResults.extraCosts > 0 ? `Bom/ferge/parkering: ${formatNumber(currentResults.extraCosts)} kr\n` : ''}Total reisekostnad: ${formatNumber(currentResults.totalCost)} kr
Minus bunnfradrag: -12 000 kr

RESULTAT:
Reisefradrag: ${formatNumber(currentResults.deduction)} kr
Skattebesparelse (22%): ${formatNumber(currentResults.taxSavings)} kr/√•r
Per m√•ned: ${formatNumber(currentResults.monthlySavings)} kr

---
Beregnet med Kalkulatornorge.no
https://kalkulatornorge.no/pendlerfradrag.html
            `.trim();
            
            document.getElementById('emailContent').textContent = emailContent;
            document.getElementById('emailModal').style.display = 'block';
        }

        function closeEmailModal() {
            document.getElementById('emailModal').style.display = 'none';
        }

        function copyEmailContent() {
            const content = document.getElementById('emailContent').textContent;
            navigator.clipboard.writeText(content).then(() => {
                alert('‚úÖ Kopiert til utklippstavle!');
            });
        }

        // Social Sharing
        function shareResults() {
            const text = `Jeg sparer ${formatNumber(currentResults.taxSavings)} kr i √•ret p√• reisefradrag! Beregn ditt eget p√• Kalkulatornorge.no`;
            const url = 'https://kalkulatornorge.no/pendlerfradrag.html';
            
            if (navigator.share) {
                navigator.share({ text, url }).catch(() => {});
            } else {
                copyToClipboard();
            }
        }

        function shareOnTwitter() {
            const text = `Jeg sparer ${formatNumber(currentResults.taxSavings)} kr i √•ret p√• reisefradrag med nye 2026-satser! üöó`;
            const url = 'https://kalkulatornorge.no/pendlerfradrag.html';
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }

        function shareOnFacebook() {
            const url = 'https://kalkulatornorge.no/pendlerfradrag.html';
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        }

        function shareOnLinkedIn() {
            const url = 'https://kalkulatornorge.no/pendlerfradrag.html';
            window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank');
        }

        function copyToClipboard() {
            const url = 'https://kalkulatornorge.no/pendlerfradrag.html';
            navigator.clipboard.writeText(url).then(() => {
                alert('‚úÖ Lenke kopiert til utklippstavle!');
            });
        }

        // Micro-tools
        function openDistanceFinder() {
            document.getElementById('distanceModal').style.display = 'block';
        }

        function closeDistanceFinder() {
            document.getElementById('distanceModal').style.display = 'none';
        }

        function calculateDistance() {
            const from = document.getElementById('fromAddress').value.trim();
            const to = document.getElementById('toAddress').value.trim();
            
            if (!from || !to) {
                alert('Vennligst fyll inn begge adressene');
                return;
            }
            
            // Simulated distance calculation (in real implementation, use Google Maps API or similar)
            // For demo, we'll extract city names and estimate
            const estimatedKm = Math.floor(Math.random() * 50) + 10;
            calculatedDistance = estimatedKm;
            
            document.getElementById('distanceValue').textContent = estimatedKm + ' km';
            document.getElementById('distanceResult').style.display = 'block';
        }

        function useCalculatedDistance() {
            document.getElementById('distance').value = calculatedDistance;
            closeDistanceFinder();
            alert(`‚úÖ Avstand satt til ${calculatedDistance} km`);
        }

        function openWorkDaysCounter() {
            document.getElementById('workDaysModal').style.display = 'block';
            updateWorkDaysCount();
        }

        function closeWorkDaysCounter() {
            document.getElementById('workDaysModal').style.display = 'none';
        }

        function updateWorkDaysCount() {
            const standard = parseInt(document.getElementById('standardWorkDays').value) || 230;
            const home = parseInt(document.getElementById('homeDays').value) || 0;
            const sick = parseInt(document.getElementById('sickDays').value) || 0;
            const other = parseInt(document.getElementById('otherDays').value) || 0;
            
            const actual = Math.max(0, standard - home - sick - other);
            document.getElementById('actualWorkDays').textContent = actual;
        }

        function useCalculatedWorkDays() {
            const actual = parseInt(document.getElementById('actualWorkDays').textContent);
            document.getElementById('workdays').value = actual;
            closeWorkDaysCounter();
            alert(`‚úÖ Arbeidsdager satt til ${actual}`);
        }

        function openBomFergeCalculator() {
            document.getElementById('bomFergeModal').style.display = 'block';
            updateBomFergeCalculation();
        }

        function closeBomFergeCalculator() {
            document.getElementById('bomFergeModal').style.display = 'none';
        }

        function updateBomFergeCalculation() {
            const bomDaily = parseFloat(document.getElementById('bomDaily').value) || 0;
            const fergeDaily = parseFloat(document.getElementById('fergeDaily').value) || 0;
            const workdays = parseInt(document.getElementById('bomWorkDays').value) || 230;
            
            const yearlyBom = bomDaily * workdays;
            const yearlyFerge = fergeDaily * workdays;
            const total = yearlyBom + yearlyFerge;
            
            document.getElementById('yearlyBom').textContent = formatNumber(yearlyBom) + ' kr';
            document.getElementById('yearlyFerge').textContent = formatNumber(yearlyFerge) + ' kr';
            document.getElementById('yearlyTotal').textContent = formatNumber(total) + ' kr';
        }

        function useCalculatedBomFerge() {
            const totalText = document.getElementById('yearlyTotal').textContent;
            const total = parseInt(totalText.replace(/\D/g, ''));
            document.getElementById('extraCosts').value = total;
            closeBomFergeCalculator();
            alert(`‚úÖ Bom/ferge kostnader satt til ${formatNumber(total)} kr`);
        }

        // Event listeners
        document.getElementById('homeDays').addEventListener('input', updateWorkDaysCount);
        document.getElementById('sickDays').addEventListener('input', updateWorkDaysCount);
        document.getElementById('otherDays').addEventListener('input', updateWorkDaysCount);
        document.getElementById('bomDaily').addEventListener('input', updateBomFergeCalculation);
        document.getElementById('fergeDaily').addEventListener('input', updateBomFergeCalculation);
        document.getElementById('bomWorkDays').addEventListener('input', updateBomFergeCalculation);

        // Modal close on outside click
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        function toggleCollapsible(element) {
            element.classList.toggle('open');
        }
        
        // Enter key to calculate
        document.getElementById('distance').addEventListener('keypress', function(e) { if (e.key === 'Enter') calculate(); });
        document.getElementById('workdays').addEventListener('keypress', function(e) { if (e.key === 'Enter') calculate(); });
        document.getElementById('extraCosts').addEventListener('keypress', function(e) { if (e.key === 'Enter') calculate(); });
    </script>

<!-- Schema Markup -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Reisefradrag Kalkulator 2026",
  "description": "Beregn reisefradrag (pendlerfradrag) for 2026. Nye satser: 1,90 kr/km og 12 000 kr bunnfradrag.",
  "url": "https://kalkulatornorge.no/pendlerfradrag.html",
  "applicationCategory": "FinanceApplication",
  "operatingSystem": "Any",
  "inLanguage": "nb-NO",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "NOK"
  },
  "creator": {
    "@type": "Organization",
    "name": "Kalkulatornorge.no",
    "url": "https://kalkulatornorge.no"
  }
}
</script>
</body>
</html>
